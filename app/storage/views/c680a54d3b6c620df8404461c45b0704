<?php $__env->startSection('title'); ?>
    <title><?php echo $modpack->name; ?> - TechnicSolder</title>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
<div class="page-header">
<h1>Modpack Management - <?php echo $modpack->name; ?></h1>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
	Editing Modpack: <?php echo $modpack->name; ?>

	</div>
	<div class="panel-body">
		<?php if($errors->all()): ?>
			<div class="alert alert-danger">
			<?php foreach($errors->all() as $error): ?>
				<?php echo $error; ?><br />
			<?php endforeach; ?>
			</div>
		<?php endif; ?>
		<form method="POST" action="<?php echo URL::current(); ?>" accept-charset="UTF-8" enctype="multipart/form-data">
		<div class="row">
			<div class="col-md-6">
				<h3>Modpack Management</h3>
				<p>Edit your modpack settings here. You are required to delete and re-import your pack on the Technic Platform when changing the Modpack slug</p>
				<hr>
				<div class="form-group">
                    <label for="name">Modpack Name</label>
                    <input type="text" class="form-control" name="name" id="name" value="<?php echo $modpack->name; ?>">
                </div>
                <div class="form-group">
                    <label for="slug">Modpack Slug</label>
                    <input type="text" class="form-control" name="slug" id="slug" value="<?php echo $modpack->slug; ?>">
                </div>
                <hr>
				<div class="form-group">
					<label class="control-label" for="hidden">Hide Modpack</label>
					<div class="controls">
						<input type="checkbox" name="hidden" id="hidden"<?php echo $checked = ($modpack->hidden ? ' checked' : ''); ?>>
						<span class="help-block">Hidden modpacks will not show up in the API response for the modpack list regardless of whether or not a client has access to the modpack.</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="private">Private Modpack</label>
					<div class="controls">
						<input type="checkbox" name="private" id="private"<?php echo ($modpack->private ? ' checked' : ''); ?>>
						<span class="help-block">Private modpacks will only be available to clients that are linked to this modpack. You can link clients below. You can also individually mark builds as private.</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="build">Latest Build</label>
					<div class="controls">
						<select name="latest" id="">
							<?php if($modpack->latest != "null"): ?>
								<option value="<?php echo $modpack->latest; ?>">
									<?php echo $modpack->latest; ?>

								</option>
							<?php else: ?>
								<option value="null" selected>None</option>
							<?php endif; ?>

							<?php foreach($modpack->builds as $build): ?>
								<?php if($modpack->latest != $build->latest): ?>
									<option value="<?php echo $build->version; ?>">
										<?php echo $build->version; ?>

									</option>
								<?php endif; ?>
							<?php endforeach; ?>
						</select>
						<span class="help-block">This is what build will be downloaded if you select "Latest Version" in the Technic Launcher.</span>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="build">Recommended Build</label>
					<div class="controls">
						<select name="recommended" id="">
							<?php if($modpack->recommended != "null"): ?>
								<option value="<?php echo $modpack->recommended; ?>">
									<?php echo $modpack->recommended; ?>

								</option>
							<?php else: ?>
								<option value="null" selected>None</option>
							<?php endif; ?>

							<?php foreach($modpack->builds as $build): ?>
								<?php if($modpack->recommended != $build->version): ?>
									<option value="<?php echo $build->version; ?>">
										<?php echo $build->version; ?>

									</option>
								<?php endif; ?>
							<?php endforeach; ?>
						</select>
						<span class="help-block">This is what build will be downloaded by default.</span>
					</div>
				</div>

			<?php if($modpack->private || $modpack->private_builds()): ?>
				<hr>
				<h3>Client Access</h3>
				<p>Check the clients below you want to have access to this modpack if anything is set to private.</p>
				<?php if(Client::all()->isEmpty()): ?>
				<div class="alert alert-warning">No Clients to add</div>
				<?php else: ?>
				<?php foreach(Client::all() as $client): ?>
				<div style="display: inline-block; padding-right: 10px;"><input type="checkbox" name="clients[]" value="<?php echo $client->id; ?>"<?php echo (in_array($client->id, $clients) ? ' checked' : ''); ?>> <?php echo $client->name; ?></div>
				<?php endforeach; ?>
				<?php endif; ?>
				<?php endif; ?>
			</div>
			<div class="col-md-6">
				<h3>Image Management</h3>
				<p>Upload your modpacks resources here. These images are what will be served to the launcher. If your modpack already has images on your mirror, they will remain working until the first time you upload them here.</p>
				<hr>
				<?php if(!$resourcesWritable): ?>
				<div class="alert alert-warning">Unable to write to <code>'public/resources/<?php echo $modpack->slug; ?>'</code>. Please check your file/folder permissions.</div>
				<?php endif; ?>
				<div class="row">
					<div class="col-md-12">
						<div class="form-group" style="border-bottom:1px solid #ddd;">
							<label class="control-label" for="background">Modpack Background</label>
							<div class="controls">
								<?php if($modpack->background): ?>
								<div class="modpack-background">
									<img src="<?php echo $modpack->background_url; ?>" class="img-thumbnail">
								</div>
								<?php endif; ?>
								<input type="file" name="background" id="background">
								<span class="help-block">Required Size: 900x600</span>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<div class="control-group" style="padding-top:10px;">
							<label class="control-label" for="icon">Modpack Icon</label>
							<div class="controls">
								<?php if($modpack->icon): ?>
								<div class="modpack-icon">
									<img src="<?php echo $modpack->icon_url; ?>" class="img-thumbnail">
								</div>
								<?php endif; ?>
								<input type="file" name="icon" id="icon">
								<span class="help-block">Recommended Size: 50x50</span>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="control-group">
							<label class="control-label" for="logo">Modpack Logo</label>
							<div class="controls">
								<?php if($modpack->logo): ?>
								<div class="modpack-logo">
									<img src="<?php echo $modpack->logo_url; ?>" class="img-thumbnail">
								</div>
								<?php endif; ?>
								<input type="file" name="logo" id="logo">
								<span class="help-block">Required Size: 370x220</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<hr>
				<?php echo Form::submit('Save Modpack', array('class' => 'btn btn-success')); ?>

				<?php echo HTML::link('modpack/delete/' . $modpack->id, 'Delete Modpack', array('class' => 'btn btn-danger')); ?>

				<?php echo HTML::link(URL::previous(), 'Go Back', array('class' => 'btn btn-primary')); ?>

			</div>
		</div>
		<?php echo Form::close(); ?>

	</div>
</div>
<script type="text/javascript">
$("#slug").slugify('#name');
</script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('layouts/master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>