<?php $__env->startSection('title'); ?>
    <title>User Management - TechnicSolder</title>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
<div class="page-header">
<h1>User Management</h1>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
	<div class="pull-right">
		    <a href="<?php echo URL::to('user/create'); ?>" class="btn btn-xs btn-success">Create User</a>
		</div>
	User List
	</div>
	<div class="panel-body">
		<?php if($errors->all()): ?>
			<div class="alert alert-danger">
			<?php foreach($errors->all() as $error): ?>
				<?php echo $error; ?><br />
			<?php endforeach; ?>
			</div>
		<?php endif; ?>
		<div class="table-responsive">
		<table class="table table-striped table-bordered table-hover" id="dataTables">
			<thead>
				<tr>
					<th>ID #</th>
					<th>Email</th>
					<th>Username</th>
					<th>Updated by (User - IP)</th>
					<th>Updated at</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
			<?php foreach($users as $user): ?>
				<tr>
					<td><?php echo $user->id; ?></td>
					<td><?php echo $user->email; ?></td>
					<td><?php echo $user->username; ?></td>
					<td>
					<?php if(!empty($user->updated_by_user_id)): ?>
						<?php if(User::find($user->updated_by_user_id)): ?>
							<?php echo User::find($user->updated_by_user_id)->username; ?>

						<?php else: ?>
							N/A
						<?php endif; ?>
					<?php endif; ?>
					 - <?php echo empty($user->updated_by_ip) ? "N/A" : $user->updated_by_ip; ?>

					</td>
					<td><?php echo date_format($user->updated_at, 'M-d-Y g:ia'); ?></td>
					<td><?php echo HTML::link('user/edit/'.$user->id,'Edit', array('class' => 'btn btn-xs btn-warning')); ?> <?php echo HTML::link('user/delete/'.$user->id, 'Delete', array('class' => 'btn btn-xs btn-danger')); ?></td>
				</tr>
			<?php endforeach; ?>
			</tbody>
		</table>
		</div>
	</div>
</div>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('bottom'); ?>
<script type="text/javascript">
$(document).ready(function() {
    $('#dataTables').dataTable();
});
</script>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('layouts/master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>