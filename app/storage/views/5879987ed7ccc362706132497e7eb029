<?php $__env->startSection('title'); ?>
    <title><?php echo $build->version; ?> - <?php echo $build->modpack->name; ?> - TechnicSolder</title>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
<div class="page-header">
<h1>Build Management</h1>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
	Edit Build (<?php echo $build->version; ?>)
	</div>
	<div class="panel-body">
		<?php if($errors->all()): ?>
			<div class="alert alert-danger">
			<?php foreach($errors->all() as $error): ?>
				<?php echo $error; ?><br />
			<?php endforeach; ?>
			</div>
		<?php endif; ?>
		<?php echo Form::open(array('url' => URL::full() )); ?>

		<input type="hidden" name="confirm-edit" value="1">
		<div class="row">
			<div class="col-md-6">
				<h4>Edit Build</h4>
				<p>Here you can modify the properties of existing builds.</p>
				<div class="alert alert-warning">If changes are made, users will need to re-install the modpack if they have already installed this build.</div>
				<hr>
				<div class="form-group">
		            <label for="version">Build Number</label>
		            <input type="text" class="form-control" name="version" id="version" value="<?php echo $build->version; ?>">
		        </div>
		        <div class="form-group">
		            <label for="version">Minecraft Version</label>
		            <select class="form-control" name="minecraft">
						<?php foreach($minecraft as $version): ?>
						<option value="<?php echo $version['version']; ?>" <?php echo ($build->minecraft == $version['version'] ? ' selected' : ''); ?>><?php echo $version['version']; ?></option>
						<?php endforeach; ?>
					</select>
		        </div>
			</div>
			<div class="col-md-6">
				<h4>Build Requirements</h4>
				<p>These are requirements that are passed onto the launcher to prevent players from playing your pack without the required minumum settings</p>
				<hr>
				<div class="form-group">
		            <label for="java-version">Minimum Java Version</label>
		            <select class="form-control" name="java-version" id="java-version">
						<option value="1.8"<?php echo ($build->min_java == '1.8' ? ' selected' : ''); ?>>Java 1.8</option>
						<option value="1.7"<?php echo ($build->min_java == '1.7' ? ' selected' : ''); ?>>Java 1.7</option>
						<option value="1.6"<?php echo ($build->min_java == '1.6' ? ' selected' : ''); ?>>Java 1.6</option>
						<option value=""<?php echo ($build->min_java == '' ? ' selected' : ''); ?>>No Requirement</option>
					</select>
		        </div>
		        <div class="form-group">
		            <label for="memory">Minimum Memory (<i>in MB</i>)</label>
		            <div class="input-group">
						<span class="input-group-addon">
							<input type="checkbox" id="memory-enabled" name="memory-enabled" aria-label="mb"<?php echo $build->min_memory ? ' checked' : ''; ?>>
						</span>
		            	<input type="text" class="form-control" name="memory" id="memory" aria-label="mb" aria-describedby="addon-mb" value="<?php echo $build->min_memory; ?>" <?php echo $build->min_memory ? '' : ' disabled'; ?>>
		            	<span class="input-group-addon" id="addon-mb">MB</span>
					</div>
					<p class="help-block">Check the checkbox to enable the memory requirement.</p>
		        </div>
			</div>
		</div>
		<hr>
		<?php echo Form::submit('Update Build', array('class' => 'btn btn-success')); ?>

		<?php echo HTML::link('modpack/build/'.$build->id.'?action=delete', 'Delete Build', array('class' => 'btn btn-danger')); ?>

		<?php echo HTML::link('modpack/build/'.$build->id, 'Go Back', array('class' => 'btn btn-primary')); ?>

		<?php echo Form::close(); ?>

	</div>
</div>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('bottom'); ?>
<script type="text/javascript">
$('#memory-enabled').change(function(){
    if ($('#memory-enabled').is(':checked')){
        $('#memory').prop('disabled', false);
    } else {
        $('#memory').val('').prop('disabled', true);
    }
});
</script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('layouts/master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>